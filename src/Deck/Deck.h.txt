/*
Glushkova Eva st108255@student.spbu.ru
*/

/**
 * @file Deck.h
 * @brief Game card deck manager
 */

#ifndef DECK_H
#define DECK_H

#include "../Cards/core/Card.h"
#include "../Cards/core/AnimalCard.h"
#include "../Cards/core/CropCard.h"

#include "../Cards/crops/WheatCard.h"
#include "../Cards/crops/CarrotCard.h"
#include "../Cards/crops/TomatoCard.h"
#include "../Cards/crops/PotatoCard.h"
#include "../Cards/animals/ChickenCard.h"
#include "../Cards/animals/SheepCard.h"
#include "../Cards/animals/CowCard.h"
#include "../Cards/animals/PigCard.h"
#include <vector>
#include <random>

/**
 * @class Deck
 * @brief Manages card deck - creation, shuffling, and drawing
 */

class Deck {
private:
    std::vector<Card*> deck_;  ///< Deck of cards
    std::mt19937 rng_;         ///< Random number generator
    int wheatCount = 4;     ///< Number of Wheat cards
    int carrotCount = 3;    ///< Number of Carrot cards
    int tomatoCount = 3;    ///< Number of Tomato cards
    int potatoCount = 2;    ///< Number of Potato cards
    int chickenCount = 4;   ///< Number of Chicken cards
    int sheepCount = 3;     ///< Number of Sheep cards
    int cowCount = 3;       ///< Number of Cow cards
    int pigCount = 2;       ///< Number of Pig cards

public:
    /**
     * @brief Constructor
     */
    Deck();
    
    /**
     * @brief Destructor - deletes all cards
     */
    ~Deck();
    
    /**
     * @brief Initialize the deck 
     */
    void initializeDeck();
    
    /**
     * @brief Shuffle the deck randomly
     */
    void shuffle();
    
    /**
     * @brief Draw one card from the deck
     * @return Pointer to card, or nullptr if deck is empty
     */
    Card* drawCard();
    
    /**
     * @brief Get number of cards remaining in deck
     * @return Card count
     */
    int getCardCount() const;
    
    /**
     * @brief Check if deck is empty
     * @return True if deck has no cards
     */
    bool isEmpty() const;
};

#endif